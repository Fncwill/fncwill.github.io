<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canadian Phone Number Lookup</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #eff6ff 0%, #e0e7ff 100%);
            min-height: 100vh;
            padding: 24px;
            color: #1f2937;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 32px;
            margin-bottom: 24px;
        }

        .header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }

        .icon-box {
            background: #4f46e5;
            padding: 12px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .icon-box svg {
            color: white;
        }

        h1 {
            font-size: 28px;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 4px;
        }

        .subtitle {
            color: #6b7280;
            font-size: 14px;
        }

        .input-group {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
        }

        .input-wrapper {
            flex: 1;
        }

        input[type="text"] {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #4f46e5;
        }

        .input-hint {
            font-size: 12px;
            color: #6b7280;
            margin-top: 8px;
        }

        button {
            background: #4f46e5;
            color: white;
            padding: 12px 32px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.3s;
            white-space: nowrap;
        }

        button:hover:not(:disabled) {
            background: #4338ca;
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .error-box {
            background: #fef2f2;
            border-left: 4px solid #ef4444;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 24px;
            display: none;
        }

        .error-box.show {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .error-text {
            color: #991b1b;
            font-weight: 500;
        }

        .result-container {
            display: none;
        }

        .result-container.show {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-header {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            color: white;
            padding: 24px;
            border-radius: 12px;
            margin-bottom: 16px;
        }

        .result-header h2 {
            font-size: 24px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .phone-number {
            font-size: 28px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            letter-spacing: 1px;
        }

        .grid {
            display: grid;
            gap: 16px;
            margin-bottom: 16px;
        }

        .grid-2 {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }

        .grid-4 {
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        }

        .info-box {
            background: #f9fafb;
            padding: 20px;
            border-radius: 12px;
            border: 2px solid #e5e7eb;
        }

        .info-box-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
        }

        .info-box-header svg {
            color: #4f46e5;
        }

        .info-box-header h3 {
            font-size: 16px;
            font-weight: bold;
        }

        .info-value-large {
            font-size: 24px;
            font-weight: 600;
            color: #111827;
        }

        .info-value-small {
            font-size: 14px;
            color: #6b7280;
            margin-top: 4px;
        }

        .info-label {
            font-size: 12px;
            color: #6b7280;
            margin-bottom: 4px;
        }

        .info-value {
            font-size: 18px;
            font-weight: 600;
            color: #111827;
        }

        .additional-info {
            background: #eff6ff;
            padding: 20px;
            border-radius: 12px;
            border: 2px solid #bfdbfe;
            margin-bottom: 16px;
        }

        .additional-info h3 {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .additional-info ul {
            list-style: none;
        }

        .additional-info li {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            margin-bottom: 4px;
            color: #374151;
        }

        .bullet {
            color: #3b82f6;
            margin-top: 4px;
        }

        .about-box {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            padding: 24px;
        }

        .about-box h3 {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 12px;
        }

        .about-box p {
            color: #6b7280;
            font-size: 14px;
            line-height: 1.6;
        }

        .type-description {
            font-size: 13px;
            color: #4b5563;
            margin-top: 6px;
            line-height: 1.4;
        }

        /* Info bubble styles */
        .info-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 18px;
            height: 18px;
            background: #4f46e5;
            color: white;
            border-radius: 50%;
            font-size: 12px;
            font-weight: bold;
            cursor: help;
            position: relative;
            margin-left: 6px;
        }

        .info-icon:hover {
            background: #4338ca;
        }

        .tooltip {
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background: #1f2937;
            color: white;
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 13px;
            line-height: 1.5;
            white-space: normal;
            width: 280px;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: #1f2937;
        }

        .info-icon:hover .tooltip {
            opacity: 1;
            visibility: visible;
        }

        .tooltip strong {
            display: block;
            margin-bottom: 6px;
            color: #60a5fa;
        }

        .tooltip-item {
            margin-bottom: 6px;
            padding-left: 12px;
            position: relative;
        }

        .tooltip-item::before {
            content: '•';
            position: absolute;
            left: 0;
            color: #60a5fa;
        }

        .tooltip-item:last-child {
            margin-bottom: 0;
        }

        @media (max-width: 768px) {
            .input-group {
                flex-direction: column;
            }

            button {
                width: 100%;
                justify-content: center;
            }

            h1 {
                font-size: 24px;
            }

            .phone-number {
                font-size: 20px;
            }

            .tooltip {
                width: 240px;
                left: auto;
                right: 0;
                transform: none;
            }

            .tooltip::after {
                left: auto;
                right: 10px;
                transform: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <div class="header">
                <div class="icon-box">
                    <svg width="28" height="28" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                    </svg>
                </div>
                <div>
                    <h1>Canadian Phone Lookup</h1>
                    <p class="subtitle">Analyze Canadian +1 phone numbers</p>
                </div>
            </div>

            <div class="input-group">
                <div class="input-wrapper">
                    <input
                        type="text"
                        id="phoneInput"
                        placeholder="Enter phone number (e.g., 416-555-1234 or just 416555)"
                    />
                    <p class="input-hint">
                        Minimum 6 digits (NPA-NXX). Full 10-digit number for complete analysis.
                    </p>
                </div>
                <button id="lookupBtn">
                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                    <span id="btnText">Lookup</span>
                </button>
            </div>

            <div id="errorContainer" class="error-box">
                <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="8" x2="12" y2="12"></line>
                    <line x1="12" y1="16" x2="12.01" y2="16"></line>
                </svg>
                <p id="errorText" class="error-text"></p>
            </div>

            <div id="resultContainer" class="result-container"></div>
        </div>

        <div class="about-box">
            <h3>About This Tool</h3>
            <p>
                This tool analyzes Canadian phone numbers in the North American Numbering Plan (NANP) format. 
                Enter at least the first 6 digits (area code + exchange) to get province, area code type, and 
                introduction date. A full 10-digit number provides additional pattern analysis. Only Canadian 
                +1 numbers are supported.
            </p>
        </div>
    </div>

    <script>
        // Expanded area code data with city/region information and NXX patterns
        const canadianAreaCodes = {
            '236': { province: 'British Columbia', type: 'Overlay', introduced: '2013', cities: 'Vancouver, Victoria, Kelowna, Nanaimo', mainCities: ['Vancouver', 'Victoria', 'Kelowna'] },
            '250': { province: 'British Columbia', type: 'Geographic', introduced: '1996', cities: 'Victoria, Kelowna, Kamloops, Prince George, Nanaimo, Courtenay', mainCities: ['Victoria', 'Kelowna', 'Kamloops', 'Prince George'] },
            '604': { province: 'British Columbia', type: 'Geographic', introduced: '1947', cities: 'Vancouver, Burnaby, Surrey, Richmond, New Westminster, North Vancouver', mainCities: ['Vancouver', 'Burnaby', 'Surrey', 'Richmond'] },
            '672': { province: 'British Columbia', type: 'Overlay', introduced: '2016', cities: 'Vancouver, Victoria, Kelowna, Nanaimo', mainCities: ['Vancouver', 'Victoria', 'Kelowna'] },
            '778': { province: 'British Columbia', type: 'Overlay', introduced: '2001', cities: 'Vancouver, Victoria, Kelowna, Surrey, Burnaby', mainCities: ['Vancouver', 'Victoria', 'Kelowna'] },
            '368': { province: 'Alberta', type: 'Overlay', introduced: '2022', cities: 'Calgary, Edmonton, Red Deer', mainCities: ['Calgary', 'Edmonton'] },
            '403': { province: 'Alberta', type: 'Geographic', introduced: '1947', cities: 'Calgary, Lethbridge, Red Deer, Medicine Hat, Airdrie', mainCities: ['Calgary', 'Lethbridge', 'Red Deer'] },
            '587': { province: 'Alberta', type: 'Overlay', introduced: '2008', cities: 'Calgary, Edmonton, Red Deer', mainCities: ['Calgary', 'Edmonton'] },
            '780': { province: 'Alberta', type: 'Geographic', introduced: '1997', cities: 'Edmonton, Grande Prairie, Fort McMurray, Lloydminster', mainCities: ['Edmonton', 'Grande Prairie', 'Fort McMurray'] },
            '825': { province: 'Alberta', type: 'Overlay', introduced: '2016', cities: 'Edmonton, Grande Prairie, Fort McMurray', mainCities: ['Edmonton', 'Grande Prairie'] },
            '306': { province: 'Saskatchewan', type: 'Geographic', introduced: '1947', cities: 'Regina, Saskatoon, Prince Albert, Moose Jaw, Swift Current', mainCities: ['Regina', 'Saskatoon', 'Prince Albert'] },
            '639': { province: 'Saskatchewan', type: 'Overlay', introduced: '2012', cities: 'Regina, Saskatoon, Prince Albert, Moose Jaw', mainCities: ['Regina', 'Saskatoon'] },
            '474': { province: 'Saskatchewan', type: 'Overlay', introduced: '2024', cities: 'Regina, Saskatoon, Prince Albert', mainCities: ['Regina', 'Saskatoon'] },
            '204': { province: 'Manitoba', type: 'Geographic', introduced: '1947', cities: 'Winnipeg, Brandon, Steinbach, Thompson, Portage la Prairie', mainCities: ['Winnipeg', 'Brandon', 'Steinbach'] },
            '431': { province: 'Manitoba', type: 'Overlay', introduced: '2012', cities: 'Winnipeg, Brandon, Steinbach, Thompson', mainCities: ['Winnipeg', 'Brandon'] },
            '226': { province: 'Ontario', type: 'Overlay', introduced: '2006', cities: 'London, Windsor, Kitchener, Waterloo, Cambridge, Sarnia', mainCities: ['London', 'Windsor', 'Kitchener'] },
            '249': { province: 'Ontario', type: 'Overlay', introduced: '2011', cities: 'Sudbury, North Bay, Barrie, Orillia, Parry Sound', mainCities: ['Sudbury', 'North Bay', 'Barrie'] },
            '289': { province: 'Ontario', type: 'Overlay', introduced: '2001', cities: 'Hamilton, Burlington, Niagara Falls, St. Catharines, Grimsby', mainCities: ['Hamilton', 'Burlington', 'Niagara Falls'] },
            '343': { province: 'Ontario', type: 'Overlay', introduced: '2010', cities: 'Ottawa, Kingston, Cornwall, Pembroke, Brockville', mainCities: ['Ottawa', 'Kingston', 'Cornwall'] },
            '365': { province: 'Ontario', type: 'Overlay', introduced: '2013', cities: 'Hamilton, Burlington, Niagara Falls, St. Catharines', mainCities: ['Hamilton', 'Burlington'] },
            '382': { province: 'Ontario', type: 'Overlay', introduced: '2023', cities: 'Sudbury, North Bay, Parry Sound', mainCities: ['Sudbury', 'North Bay'] },
            '416': { province: 'Ontario', type: 'Geographic', introduced: '1947', cities: 'Toronto (downtown and central areas)', mainCities: ['Toronto'] },
            '437': { province: 'Ontario', type: 'Overlay', introduced: '2013', cities: 'Toronto (all areas)', mainCities: ['Toronto'] },
            '519': { province: 'Ontario', type: 'Geographic', introduced: '1953', cities: 'London, Windsor, Kitchener, Cambridge, Guelph, Stratford', mainCities: ['London', 'Windsor', 'Kitchener', 'Cambridge'] },
            '548': { province: 'Ontario', type: 'Overlay', introduced: '2019', cities: 'London, Windsor, Kitchener, Cambridge, Guelph', mainCities: ['London', 'Windsor', 'Kitchener'] },
            '613': { province: 'Ontario', type: 'Geographic', introduced: '1947', cities: 'Ottawa, Kingston, Brockville, Cornwall, Pembroke, Belleville', mainCities: ['Ottawa', 'Kingston', 'Brockville'] },
            '647': { province: 'Ontario', type: 'Overlay', introduced: '2001', cities: 'Toronto (all areas)', mainCities: ['Toronto'] },
            '705': { province: 'Ontario', type: 'Geographic', introduced: '1957', cities: 'Sudbury, North Bay, Barrie, Peterborough, Orillia', mainCities: ['Sudbury', 'North Bay', 'Barrie', 'Peterborough'] },
            '742': { province: 'Ontario', type: 'Overlay', introduced: '2023', cities: 'Sudbury, North Bay, Parry Sound', mainCities: ['Sudbury', 'North Bay'] },
            '753': { province: 'Ontario', type: 'Overlay', introduced: '2023', cities: 'Ottawa, Kingston, Cornwall, Brockville', mainCities: ['Ottawa', 'Kingston'] },
            '807': { province: 'Ontario', type: 'Geographic', introduced: '1962', cities: 'Thunder Bay, Kenora, Dryden, Fort Frances, Sioux Lookout', mainCities: ['Thunder Bay', 'Kenora', 'Dryden'] },
            '905': { province: 'Ontario', type: 'Geographic', introduced: '1993', cities: 'Mississauga, Hamilton, Markham, Brampton, Vaughan, Oakville', mainCities: ['Mississauga', 'Hamilton', 'Markham', 'Brampton'] },
            '354': { province: 'Quebec', type: 'Overlay', introduced: '2022', cities: 'Sherbrooke, Trois-Rivières, Drummondville', mainCities: ['Sherbrooke', 'Trois-Rivières'] },
            '367': { province: 'Quebec', type: 'Overlay', introduced: '2023', cities: 'Laval, Saint-Jérôme, Mont-Tremblant', mainCities: ['Laval', 'Saint-Jérôme'] },
            '418': { province: 'Quebec', type: 'Geographic', introduced: '1947', cities: 'Quebec City, Lévis, Rimouski, Sept-Îles, Saguenay', mainCities: ['Quebec City', 'Lévis', 'Rimouski'] },
            '438': { province: 'Quebec', type: 'Overlay', introduced: '2006', cities: 'Montreal (island and surrounding areas)', mainCities: ['Montreal'] },
            '450': { province: 'Quebec', type: 'Geographic', introduced: '1998', cities: 'Laval, Longueuil, Saint-Jean-sur-Richelieu, Saint-Jérôme, Joliette', mainCities: ['Laval', 'Longueuil', 'Saint-Jean-sur-Richelieu'] },
            '468': { province: 'Quebec', type: 'Overlay', introduced: '2023', cities: 'Laval, Longueuil, Saint-Jean-sur-Richelieu', mainCities: ['Laval', 'Longueuil'] },
            '514': { province: 'Quebec', type: 'Geographic', introduced: '1947', cities: 'Montreal (island of Montreal)', mainCities: ['Montreal'] },
            '579': { province: 'Quebec', type: 'Overlay', introduced: '2010', cities: 'Sherbrooke, Trois-Rivières, Drummondville', mainCities: ['Sherbrooke', 'Trois-Rivières'] },
            '581': { province: 'Quebec', type: 'Overlay', introduced: '2008', cities: 'Quebec City, Lévis, Rimouski, Saguenay', mainCities: ['Quebec City', 'Lévis'] },
            '819': { province: 'Quebec', type: 'Geographic', introduced: '1957', cities: 'Gatineau, Sherbrooke, Trois-Rivières, Drummondville, Granby', mainCities: ['Gatineau', 'Sherbrooke', 'Trois-Rivières'] },
            '873': { province: 'Quebec', type: 'Overlay', introduced: '2017', cities: 'Gatineau, Sherbrooke, Trois-Rivières, Drummondville', mainCities: ['Gatineau', 'Sherbrooke'] },
            '428': { province: 'New Brunswick', type: 'Overlay', introduced: '2014', cities: 'Moncton, Saint John, Fredericton, Bathurst, Miramichi', mainCities: ['Moncton', 'Saint John', 'Fredericton'] },
            '506': { province: 'New Brunswick', type: 'Geographic', introduced: '1955', cities: 'Moncton, Saint John, Fredericton, Bathurst, Miramichi', mainCities: ['Moncton', 'Saint John', 'Fredericton'] },
            '782': { province: 'Nova Scotia / Prince Edward Island', type: 'Overlay', introduced: '2014', cities: 'Halifax, Sydney, Dartmouth, Charlottetown, Summerside', mainCities: ['Halifax', 'Sydney', 'Charlottetown'] },
            '902': { province: 'Nova Scotia / Prince Edward Island', type: 'Geographic', introduced: '1947', cities: 'Halifax, Sydney, Dartmouth, Charlottetown, Summerside, Truro', mainCities: ['Halifax', 'Sydney', 'Dartmouth', 'Charlottetown'] },
            '709': { province: 'Newfoundland and Labrador', type: 'Geographic', introduced: '1962', cities: 'St. John\'s, Corner Brook, Mount Pearl, Labrador City, Gander', mainCities: ['St. John\'s', 'Corner Brook', 'Mount Pearl'] },
            '867': { province: 'Yukon / Northwest Territories / Nunavut', type: 'Geographic', introduced: '1997', cities: 'Whitehorse, Yellowknife, Iqaluit, Inuvik, Dawson City', mainCities: ['Whitehorse', 'Yellowknife', 'Iqaluit'] },
        };

        // Common original carriers by province (historical data)
        const originalCarriers = {
            'British Columbia': 'BC Tel (now Telus)',
            'Alberta': 'AGT/Telus',
            'Saskatchewan': 'SaskTel',
            'Manitoba': 'Manitoba Telecom Services (MTS, now Bell MTS)',
            'Ontario': 'Bell Canada',
            'Quebec': 'Bell Canada',
            'New Brunswick': 'NBTel (now Bell Aliant)',
            'Nova Scotia / Prince Edward Island': 'Maritime Tel & Tel (now Bell Aliant)',
            'Newfoundland and Labrador': 'NewTel (now Bell Aliant)',
            'Yukon / Northwest Territories / Nunavut': 'Northwestel (Telus subsidiary)'
        };

        function formatPhoneNumber(value) {
            const digits = value.replace(/\D/g, '');
            if (digits.startsWith('1')) {
                return digits.slice(1);
            }
            return digits;
        }

        function showError(message) {
            document.getElementById('errorText').textContent = message;
            document.getElementById('errorContainer').classList.add('show');
            document.getElementById('resultContainer').classList.remove('show');
        }

        function hideError() {
            document.getElementById('errorContainer').classList.remove('show');
        }

        function determineNumberType(npa, nxx) {
            if (['800', '833', '844', '855', '866', '877', '888'].includes(npa)) {
                return {
                    type: 'Toll-Free',
                    description: 'A toll-free number that allows callers to reach businesses without being charged for the call.',
                    details: 'Commonly used by businesses for customer service and sales.'
                };
            }
            
            if (nxx === '555') {
                return {
                    type: 'Reserved/Fictional',
                    description: 'Numbers in the 555 exchange are reserved for directory assistance and fictional use.',
                    details: 'Commonly used in movies, TV shows, and documentation to avoid calling real numbers.'
                };
            }
            
            if (nxx.startsWith('1')) {
                return {
                    type: 'Special Services',
                    description: 'Exchange codes starting with 1 are typically reserved for special routing or services.',
                    details: 'May include operator services, special billing arrangements, or network testing.'
                };
            }
            
            return {
                type: 'Standard Line',
                description: 'A standard telephone number that could be assigned to landline, mobile, or VoIP services.',
                details: 'In Canada, phone numbers are portable between carriers and services, making it difficult to determine the exact line type without additional data.'
            };
        }

        function analyzeNumber(phoneDigits) {
            hideError();

            if (phoneDigits.length < 6) {
                showError('Please enter at least 6 digits (NPA-NXX format)');
                return;
            }

            const npa = phoneDigits.slice(0, 3);
            const nxx = phoneDigits.slice(3, 6);
            const lineNumber = phoneDigits.slice(6, 10);

            if (!canadianAreaCodes[npa]) {
                showError('Invalid Canadian area code. Only +1 Canadian numbers are supported.');
                return;
            }

            const areaCodeInfo = canadianAreaCodes[npa];
            const numberTypeInfo = determineNumberType(npa, nxx);
            let additionalInfo = [];

            if (numberTypeInfo.type === 'Toll-Free') {
                additionalInfo.push({
                    text: 'This is a toll-free number - calls are free for the caller',
                    tooltip: 'Businesses pay for incoming calls to toll-free numbers. These are commonly used for customer service.'
                });
            }

            if (phoneDigits.length === 10) {
                const lastFour = lineNumber;
                
                if (lastFour === '0000') {
                    additionalInfo.push({
                        text: 'Possible business main line (ends in 0000)',
                        tooltip: 'Numbers ending in 0000 are often used as main business lines or reception numbers.'
                    });
                }
                
                if (/^(\d)\1{3}$/.test(lastFour)) {
                    additionalInfo.push({
                        text: 'Repeating pattern detected - possibly a memorable or vanity number',
                        tooltip: 'Numbers with repeating digits are often purchased specifically for easy memorization and marketing purposes.'
                    });
                }

                if (lastFour === '1234' || lastFour === '4321' || lastFour === '5678') {
                    additionalInfo.push({
                        text: 'Sequential pattern - likely a premium or vanity number',
                        tooltip: 'Sequential numbers are considered premium and are often used for marketing or easy recall.'
                    });
                }
            }

            const result = {
                formattedNumber: phoneDigits.length === 10 
                    ? `+1 (${npa}) ${nxx}-${lineNumber}`
                    : `+1 (${npa}) ${nxx}-XXXX`,
                npa: npa,
                nxx: nxx,
                lineNumber: lineNumber || 'Not provided',
                province: areaCodeInfo.province,
                cities: areaCodeInfo.cities,
                mainCities: areaCodeInfo.mainCities,
                areaCodeType: areaCodeInfo.type,
                introduced: areaCodeInfo.introduced,
                numberType: numberTypeInfo.type,
                numberTypeDescription: numberTypeInfo.description,
                numberTypeDetails: numberTypeInfo.details,
                isComplete: phoneDigits.length === 10,
                additionalInfo: additionalInfo,
                country: 'Canada',
                countryCode: '+1',
                originalCarrier: originalCarriers[areaCodeInfo.province] || 'Unknown'
            };

            displayResult(result);
        }

        function displayResult(result) {
            const container = document.getElementById('resultContainer');
            
            let additionalInfoHTML = '';
            if (result.additionalInfo.length > 0) {
                additionalInfoHTML = `
                    <div class="additional-info">
                        <h3>Additional Information
                            <span class="info-icon">
                                i
                                <div class="tooltip">
                                    <strong>Additional Patterns:</strong>
                                    <div class="tooltip-item"><strong>Main Line (0000):</strong> Often used by businesses</div>
                                    <div class="tooltip-item"><strong>Repeating Digits:</strong> Memorable marketing numbers</div>
                                    <div class="tooltip-item"><strong>Sequential:</strong> Premium vanity numbers</div>
                                    <div class="tooltip-item"><strong>Toll-Free:</strong> Free for caller</div>
                                </div>
                            </span>
                        </h3>
                        <ul>
                            ${result.additionalInfo.map(info => `
                                <li>
                                    <span class="bullet">•</span>
                                    <span>${info.text}</span>
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                `;
            }

            container.innerHTML = `
                <div class="result-header">
                    <h2>
                        <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                        </svg>
                        Analysis Complete
                    </h2>
                    <div class="phone-number">${result.formattedNumber}</div>
                </div>

                <div class="grid grid-2">
                    <div class="info-box">
                        <div class="info-box-header">
                            <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                <circle cx="12" cy="10" r="3"></circle>
                            </svg>
                            <h3>Location</h3>
                            <span class="info-icon">
                                i
                                <div class="tooltip">
                                    <strong>Location Information:</strong>
                                    Based on the area code (NPA), we can determine the province and general region. The cities listed represent common service areas for this area code. Note: With number portability, the actual location may vary.
                                </div>
                            </span>
                        </div>
                        <div class="info-value-large">${result.province}</div>
                        <div class="info-value-small">Main Cities: ${result.mainCities.join(', ')}</div>
                        <div class="info-value-small" style="margin-top: 8px;">All Coverage Areas: ${result.cities}</div>
                    </div>

                    <div class="info-box">
                        <div class="info-box-header">
                            <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
                                <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
                            </svg>
                            <h3>Number Type</h3>
                            <span class="info-icon">
                                i
                                <div class="tooltip">
                                    <strong>Number Types:</strong>
                                    <div class="tooltip-item"><strong>Standard Line:</strong> Regular landline, mobile, or VoIP</div>
                                    <div class="tooltip-item"><strong>Toll-Free:</strong> Free for caller, business pays</div>
                                    <div class="tooltip-item"><strong>Reserved/Fictional:</strong> For media and documentation</div>
                                    <div class="tooltip-item"><strong>Special Services:</strong> Network or operator services</div>
                                </div>
                            </span>
                        </div>
                        <div class="info-value-large">${result.numberType}</div>
                        <div class="type-description">${result.numberTypeDescription}</div>
                    </div>
                </div>

                <div class="info-box">
                    <div class="info-box-header">
                        <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="16" y1="2" x2="16" y2="6"></line>
                            <line x1="8" y1="2" x2="8" y2="6"></line>
                            <line x1="3" y1="10" x2="21" y2="10"></line>
                        </svg>
                        <h3>Area Code Information</h3>
                        <span class="info-icon">
                            i
                            <div class="tooltip">
                                <strong>Area Code Types:</strong>
                                <div class="tooltip-item"><strong>Geographic:</strong> Original area code for a specific region</div>
                                <div class="tooltip-item"><strong>Overlay:</strong> Additional area code sharing the same geographic area as an existing code</div>
                            </div>
                        </span>
                    </div>
                    <div class="grid grid-2">
                        <div>
                            <div class="info-label">Area Code (NPA)</div>
                            <div class="info-value">${result.npa}</div>
                        </div>
                        <div>
                            <div class="info-label">Exchange (NXX)</div>
                            <div class="info-value">${result.nxx}</div>
                        </div>
                        <div>
                            <div class="info-label">Type</div>
                            <div class="info-value">${result.areaCodeType}</div>
                        </div>
                        <div>
                            <div class="info-label">Introduced</div>
                            <div class="info-value">${result.introduced}</div>
                        </div>
                    </div>
                </div>

                ${additionalInfoHTML}

                <div class="info-box">
                    <h3 style="margin-bottom: 12px;">Technical Details
                        <span class="info-icon">
                            i
                            <div class="tooltip">
                                <strong>Technical Information:</strong>
                                <div class="tooltip-item"><strong>Original Carrier:</strong> Historical incumbent provider that originally served this region</div>
                                <div class="tooltip-item"><strong>NANP:</strong> North American Numbering Plan - shared by US, Canada, and Caribbean</div>
                                <div class="tooltip-item">Note: Due to number portability, current carrier may differ from original</div>
                            </div>
                        </span>
                    </h3>
                    <div class="grid grid-4">
                        <div>
                            <div class="info-label">Country</div>
                            <div class="info-value">${result.country}</div>
                        </div>
                        <div>
                            <div class="info-label">Country Code</div>
                            <div class="info-value">${result.countryCode}</div>
                        </div>
                        <div>
                            <div class="info-label">Line Number</div>
                            <div class="info-value" style="font-family: 'Courier New', monospace;">${result.lineNumber}</div>
                        </div>
                        <div>
                            <div class="info-label">Format</div>
                            <div class="info-value">NANP</div>
                        </div>
                    </div>
                    <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid #e5e7eb;">
                        <div class="info-label">Original Carrier (Historical)</div>
                        <div class="info-value">${result.originalCarrier}</div>
                        <div class="type-description" style="margin-top: 4px;">This was the incumbent telephone company that originally served this region. Due to deregulation and number portability, the current service provider may be different.</div>
                    </div>
                </div>
            `;

            container.classList.add('show');
        }

        function handleLookup() {
            const input = document.getElementById('phoneInput').value;
            const cleaned = formatPhoneNumber(input);
            
            if (cleaned.length >= 6) {
                document.getElementById('btnText').textContent = 'Analyzing...';
                document.getElementById('lookupBtn').disabled = true;
                
                setTimeout(() => {
                    analyzeNumber(cleaned);
                    document.getElementById('btnText').textContent = 'Lookup';
                    document.getElementById('lookupBtn').disabled = false;
                }, 500);
            } else {
                showError('Please enter at least 6 digits');
            }
        }

        document.getElementById('lookupBtn').addEventListener('click', handleLookup);
        document.getElementById('phoneInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                handleLookup();
            }
        });

        document.getElementById('phoneInput').addEventListener('input', () => {
            hideError();
        });
    </script>
</body>
</html>
                                